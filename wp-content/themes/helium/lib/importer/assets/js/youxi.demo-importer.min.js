;(function(a,f,n,t){function g(c,b){c.toggleClass("is-importing",b);p.prop("disabled",b)}function q(c,b,a){0<a?b.html(_demoImporterSettings.failureMessage.replace("{count}",a.toString())):b.html(_demoImporterSettings.successMessage);_demoImporterSettings.hasPreviousImport=!a;setTimeout(function(){d=!1;g(c,d);b.empty()},parseInt(_demoImporterSettings.importFinishTimeout))}var d=!1,r=function(){var a=0,b;for(b in _demoImporterSettings.importTasks)a++;return a}(),p=a(".demo-content .demo-actions > button");a(f).on("beforeunload.demo-importer",function(){if(d)return _demoImporterSettings.beforeUnloadMessage});a(n).on("click.demo-importer",".demo-content .demo-actions > button",function(c){c.preventDefault();if(!(d||_demoImporterSettings.hasPreviousImport&&!confirm(_demoImporterSettings.hasPreviousImportMessage))){var b=0,h=0,e=a(this).closest(".demo-content"),k=e.find(".more-details"),l=e.data("demo-id"),f=e.data("wp-nonce");l&&a.each(_demoImporterSettings.importTasks,function(c,m){a.ajaxQueue({type:"POST",dataType:"json",url:_demoImporterSettings.ajaxUrl,data:{action:_demoImporterSettings.ajaxAction,_ajax_nonce:f,task:a.extend(!0,{},m,{task_id:c,demo_id:l})},beforeSend:function(){g(e,d=!0);k.html(m.status)}}).done(function(a){_demoImporterSettings.importDebug&&(a.success?console.log(a.data.result):console.log(a.data.error))}).fail(function(){++h}).always(function(){++b==r&&q(e,k,h)})})}})})(jQuery,window,document);