/**
 * Youxi Shortcode JS
 *
 * This script contains the core utilities for editing shortcodes
 *
 * @package   Youxi Shortcode
 * @author    Mairel Theafila <maimairel@yahoo.com>
 * @copyright Copyright (c) 2013, Mairel Theafila
 */
jQuery.Youxi=jQuery.Youxi||{};(function(e,k,l,m){e.extend(!0,e.Youxi,{Shortcode:{getSetting:_.memoize(function(a,c){var b=youxiShortcodeSettings.args||{},d=b.orphans||{},e;_.each(b.categories||[],function(b){_.isUndefined(e)&&_.has(b,"shortcodes")&&_.has(b.shortcodes,a)&&_.has(b.shortcodes[a],c)&&(e=b.shortcodes[a][c])});_.isUndefined(e)&&_.has(d,a)&&_.has(d[a],c)&&(e=d[a][c]);return e},function(){return"$.Youxi.Shortcode.getSetting("+_.toArray(arguments).join(", ")+")"}),prefix:_.memoize(function(a){var c=youxiShortcodeSettings.prefix;return c&&"string"==e.type(c)?a&&"string"==e.type(a)?this.getSetting(a,"third_party")?a:c+this.unprefix(a):c:"string"==e.type(a)?a:""}),unprefix:_.memoize(function(a){return a.replace(new RegExp("^"+this.prefix()),"")}),construct:function(a,c){a=this.prefix(a);var b=[],d,b="",f=this.getSetting(a,"defaults")||{},h=this.getSetting(a,"inline")?"":"\n\n",g=this.getSetting(a,"insert_nl")?"\n\n":"";_.isArray(c)?b=_.map(c,function(c){return this.construct(a,c)},this).join(h):e.isPlainObject(c)&&(c=e.extend(!0,{},c),_.has(c,"content")&&(d=c.content,delete c.content),b=e.map(c,_.bind(function(c,b){c=this.serialize(a,b,c);if(b&&c&&(!_.has(f,b)||_.isNull(f[b])||c!=f[b]))return b+'="'+c+'"'},this)),_.isUndefined(d)||(_.isString(d)||(d=this.serialize(a,"content",d)),d=""===d?d:[g,e.trim(d),g].join("")),b="["+Array.prototype.concat([a],b).join(" ")+"]",_.isString(d)&&(b=b+d+("[/"+a+"]")));return b},serialize:function(a,c,b){a=this.prefix(a);e.isPlainObject(this.serializers)&&_.has(this.serializers,a)&&(a=this.serializers[a],_.has(a,c)&&_.isFunction(a[c])&&(b=a[c].call(this,b)));return b},deserialize:function(a,c,b){a=this.prefix(a);e.isPlainObject(this.deserializers)&&_.has(this.deserializers,a)&&(a=this.deserializers[a],_.has(a,c)&&_.isFunction(a[c])&&(b=a[c].call(this,b)));return b},deserializeArray:function(a){return _.map(_.isArray(a)?a:[],function(a){if(e.isPlainObject(a)&&_.has(a,"tag")){var b,d=_.extend({},a.atts||{},{content:a.content||""});for(b in d)d[b]=this.deserialize(a.tag,b,d[b]);return d}},this)}}})})(jQuery,window,document);