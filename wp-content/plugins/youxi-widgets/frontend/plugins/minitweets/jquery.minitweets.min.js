(function(b,q,r,s){var m={htmlEscape:function(a){var b={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};return(a+"").replace(/[&"'><]/g,function(a){return b[a]})},toRelativeTime:function(a){a=parseInt((new Date-a)/1E3);return 1>a?"just now":60>a?a+" seconds ago":120>a?"about a minute ago":2700>a?"about "+parseInt(a/60)+" minutes ago":7200>a?"about an hour ago":86400>a?"about "+parseInt(a/3600)+" hours ago":172800>a?"about a day ago":"about "+parseInt(a/86400)+" days ago"},linkEntities:function(a,
d){var f=(d.urls||[]).concat(d.media||[]);if("undefined"!==typeof twttr&&twttr.txt&&b.isFunction(twttr.txt.autoLink))return twttr.txt.autoLink(a,{urlEntities:f});var c=this.htmlEscape;return a.replace(/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,function(a){for(var b=/^[a-z]+:/i.test(a)?a:"http://"+a,d=0;d<f.length;++d){var l=
f[d];if(l.url==b&&l.expanded_url){b=l.expanded_url;a=l.display_url;break}}return'<a href="'+c(b)+'">'+c(a)+"</a>"}).replace(/(^|[\W])@(\w+)/gi,'$1@<a href="https://twitter.com/$2">$2</a>').replace(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="https://twitter.com/#!/search?q=%23$1">#$1</a>')},template:function(){var a=/<%([\s\S]+?)%>/g,b=/<%=([\s\S]+?)%>/g,f=/<%-([\s\S]+?)%>/g,c,e=/.^/,k={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},
g;for(g in k)k[k[g]]=g;var l=/\\|'|\r|\n|\t|\u2028|\u2029/g;return function(h,g,n){c=n;h="__p+='"+h.replace(l,function(a){return"\\"+k[a]}).replace(f||e,function(a,c){return"'+\n_.escape("+unescape(c)+")+\n'"}).replace(b||e,function(a,c){return"'+\n("+unescape(c)+")+\n'"}).replace(a||e,function(a,c){return"';\n"+unescape(c)+"\n;__p+='"})+"';\n";c||(h="with(obj||{}){\n"+h+"}\n");h="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+h+"return __p;\n";var m=new Function(c||
"obj",h);if(g)return m(g);g=function(a){return m.call(this,a)};g.source="function("+(c||"obj")+"){\n"+h+"}";return g}}()},p=function(a){with(a||{})a=""+('<div class="twitter-header"><div class="twitter-avatar"><a href="'+user_url+'"><img src="'+avatar_normal+'" alt="'+user_screen_name+'" title="'+user_screen_name+'"></a></div><div class="twitter-info"><a href="'+user_url+'" class="twitter-name">'+user_name+'</a><a href="'+user_url+'" class="twitter-user">@'+user_screen_name+'</a></div></div><div class="twitter-text">'+
text+'</div><a class="twitter-time" href="'+tweet_url+'">'+relative_time+'</a><div class="twitter-intents"><ul><li><a href="'+reply_url+'" title="Reply">Reply</a></li><li><a href="'+retweet_url+'" title="Retweet">Retweet</a></li><li><a href="'+favorite_url+'" title="Favorite">Favorite</a></li></ul></div>');return a},n=function(a,d){this.element=b(a);this.init(d||{})};n.prototype={defaults:{username:null,count:1,api:{host:"api.twitter.com",url:"/1.1/statuses/user_timeline"},entryPath:"/twitter/",userParams:"",
template:null,includeRaw:!1,loadingText:"Loading Tweets...",beforeAppend:b.noop,afterAppend:b.noop},init:function(a){this.options=b.extend(!0,{},this.defaults,a);this._makeRequest()},_makeRequest:function(){var a=this,d={type:"post",dataType:"json",url:this.options.entryPath,data:b.extend(!0,{},this._getRequestData(),this.options.userParams),beforeSend:function(){a.element.html('<p class="minitweets-loading">'+a.options.loadingText+"</p>")}};b.ajax(d).done(b.proxy(this._handleResponse,this)).fail(function(b,
c,d){a._appendErrors(d)})},_getRequestData:function(){return{request:{host:this.options.api.host,url:this.options.api.url,parameters:{screen_name:this.options.username,count:this.options.count,include_rts:!0,include_entities:!0}}}},_handleResponse:function(a){a.hasOwnProperty("message")&&a.message&&console.log(a.message);a.hasOwnProperty("response")&&a.response&&(b.isArray(a.response)?(a=this._extractTweets(a.response),b.isFunction(this.options.beforeAppend)&&this.options.beforeAppend.call(this.element,
a),this._appendTweets(a),b.isFunction(this.options.afterAppend)&&this.options.afterAppend.call(this.element,a)):a.response.hasOwnProperty("errors")&&this._appendErrors(a.response.errors))},_extractTweets:function(a){var d=this,f=/_normal(\.[A-Za-z]+)$/;return b.map(a||[],function(a){if(b.isPlainObject(a)&&a.hasOwnProperty("id_str")){var e=a.user.profile_image_url_https||a.user.profile_image_url,k="https://twitter.com/"+a.user.screen_name,g=Date.parse(a.created_at),e={id:a.id_str,user_name:a.user.name,
user_screen_name:a.user.screen_name,user_url:k,avatar_normal:e,avatar_bigger:e.replace(f,"_bigger$1"),avatar_mini:e.replace(f,"_mini$1"),avatar:e.replace(f,"$1"),text:m.linkEntities(a.text,a.entities),timestamp:g,relative_time:m.toRelativeTime(g),tweet_url:k+"/statuses/"+a.id_str,reply_url:"https://twitter.com/intent/tweet?in_reply_to="+a.id_str,retweet_url:"https://twitter.com/intent/retweet?tweet_id="+a.id_str,favorite_url:"https://twitter.com/intent/favorite?tweet_id="+a.id_str};d.options.includeRaw&&
(e.raw=a);return e}}).slice(0,this.options.count)},_appendTweets:function(a){var d=this.options.template?m.template(this.options.template):p;a=b.map(a,function(a){try{return d(a)}catch(b){console.log("[MiniTweets]: "+b.message)}});this.element.html(a)},_appendErrors:function(a){this.element.html('<p class="minitweets-error">An error has occured while fetching your tweets. Check your JavaScript console to see the error messages.</p>');console.log(a)}};b.fn.miniTweets=function(a){if("string"==typeof a){var d,
f,c,e=Array.prototype.slice.call(arguments,1);d=0;for(f=this.length;d<f;d++)if(c=b.data(this[d],"minitweets"),c instanceof n)if("_"!==a[0]&&b.isFunction(c[a])){if(c=c[a].apply(c,e),"undefined"!==typeof c)return c}else console.error("The method MiniTweets."+a+" doesn't exists.");else"destroy"!=a&&console.error("Calling MiniTweets."+a+" before initialization.")}else this.each(function(){b.data(this,"minitweets")instanceof n||b.data(this,"minitweets",new n(this,a))});return this}})(jQuery,window,document);